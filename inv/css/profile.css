/* --- VARIABLES Y TEMA (Unificado con live.css) --- */
:root {
    --color-background: #f0f2f5;
    --color-surface: #ffffff;
    --color-primary: #1c1e21;      /* Color de texto principal */
    --color-secondary: #65676b;    /* Color de texto secundario */
    --color-accent: #b72a1e;
    --color-border: #ddd;
    --border-radius: 12px;
}

body.dark-theme {
    --color-background: #18191a;
    --color-surface: #242526;
    --color-primary: #e4e6eb;      /* Color de texto principal en modo oscuro */
    --color-secondary: #b0b3b8;    /* Color de texto secundario en modo oscuro */
    --border-color: #3a3b3c;
}

/* --- ESTILOS GENERALES --- */
*, *::before, *::after { box-sizing: border-box; }
body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    margin: 0;
    background-color: var(--color-background);
    color: var(--color-primary);
    padding-top: 0px; /* Espacio para el nuevo header sticky */
}

h3 {
    font-size: 1.2rem;
    margin: 0 0 1rem 0;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--color-border);
    color: var(--color-primary);
}

h3 i { margin-right: 0.75rem; color: var(--color-accent); }

.page-container {
    padding: 2rem 1.5rem;
    max-width: 1600px;
    margin: 0 auto;
}

/* --- BARRA DE NAVEGACIÓN --- */
.top-bar {
    position: sticky;
    top: 0;
    z-index: 1000;
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 70px;
    padding: 0 1.5rem;
    background-color: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid var(--color-border);
}
body.dark-theme .top-bar {
    background-color: rgba(24, 25, 26, 0.8);
}
.top-bar__left, .top-bar__right { display: flex; align-items: center; gap: 0.75rem; }
.top-bar__logo img { height: 32px; }
.top-bar-btn {
    background: none; border: none; cursor: pointer; color: var(--color-secondary);
    width: 40px; height: 40px; border-radius: 50%; display: flex;
    align-items: center; justify-content: center; font-size: 1.1rem;
}
.top-bar-btn:hover { background-color: var(--color-border); color: var(--color-primary); }
#user-avatar-header img { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; }

/* --- LAYOUT DEL PERFIL --- */
.profile-layout { display: grid; gap: 1.5rem; }
@media (min-width: 1024px) {
    .profile-layout { grid-template-columns: 320px 1fr; }
    .profile-sidebar { position: sticky; top: calc(86px + 2rem); }
}
.main-content { display: grid; gap: 1.5rem; grid-auto-rows: min-content; }
.bento-box { background-color: var(--color-surface); padding: 1.5rem; border-radius: var(--border-radius); }
.bento-box.full-width { grid-column: 1 / -1; }

/* --- TARJETA DE PERFIL (SIDEBAR) --- */
.profile-card { 
    text-align: center;
 }
.profile-card__avatar {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    object-fit: cover;
    margin: 0 auto 1rem auto;
    border: 4px solid var(--color-accent);
    background-color: var(--color-border); /* <-- CORRECCIÓN para evitar el "salto" */
}
.profile-card h2 { font-size: 1.5rem; margin: 0; color: var(--color-primary); }
.profile-card__orcid { font-size: 0.9rem; color: var(--color-secondary); margin: 0.25rem 0 1rem 0; }
.profile-card__bio { font-size: 0.95rem; margin-bottom: 1.5rem; color: var(--color-secondary); }
.profile-card__socials { display: flex; justify-content: center; gap: 1.5rem; font-size: 1.5rem; margin-bottom: 1.5rem; }
.profile-card__socials a { color: var(--color-secondary); }

/* --- FORMULARIOS Y BOTONES --- */
.form-group label { display: block; font-weight: 500; margin-bottom: 0.5rem; font-size: 0.9rem; }
input, textarea {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid var(--color-border);
    border-radius: 6px;
    background-color: var(--color-background);
    color: var(--color-primary);
}
.btn { width: 100%; padding: 0.8rem; border: none; border-radius: 6px; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 0.5rem; text-decoration: none; }
.btn-primary { background-color: var(--color-accent); color: white; }
.btn-secondary { background-color: var(--color-surface-light); color: var(--color-primary); border: 1px solid var(--color-border); }

/* --- NUEVO LAYOUT HORIZONTAL PARA ESCRITORIO --- */

@media (min-width: 1024px) {
    .main-content {
        display: grid;
        grid-template-columns: minmax(0, 2fr) minmax(0, 1fr); /* Columna principal más ancha */
        gap: 1.5rem;
        align-items: start; /* Alinea los elementos al inicio de la celda del grid */
    }

    .main-column, .side-column {
        display: grid;
        gap: 1.5rem;
        grid-auto-rows: min-content;
    }
}

/* Estilos para la lista de proyectos/publicaciones */
.projects-list {
    margin-top: 1.5rem;
    border-top: 1px solid var(--color-border);
    padding-top: 1.5rem;
}

.publication-item {
    padding: 1rem;
    border: 1px solid var(--color-border);
    border-radius: 8px;
    margin-bottom: 1rem;
    background-color: var(--color-background);
}

.publication-item p {
    margin: 0 0 0.5rem 0;
    font-weight: 500;
}

.publication-item span {
    font-size: 0.85rem;
    color: var(--color-secondary);
}

/* --- Estilo para Aviso de Sincronización ORCID --- */
.orcid-sync-hint {
    background-color: var(--color-surface-light);
    border: 1px solid var(--color-border);
    border-radius: 6px;
    padding: 0.75rem;
    margin-top: 1rem;
    font-size: 0.85rem;
    color: var(--color-secondary);
    display: flex;
    align-items: center;
    gap: 0.75rem;
}
.orcid-sync-hint i {
    color: var(--color-accent);
}

/* --- INICIO: NUEVOS ESTILOS PARA PESTAÑAS (CORREGIDO) --- */
.profile-tabs {
    display: flex;
    border-bottom: 1px solid var(--color-border);
    grid-column: 1 / -1;
    /* --- LÓGICA STICKY --- */
    position: -webkit-sticky;
    position: sticky;
    top: 85px; /* Altura del header para que se pegue justo debajo */
    background-color: var(--color-background);
    z-index: 100;
}
.profile-tab-link {
    flex: 1; padding: 1rem; background: none; border: none;
    border-bottom: 3px solid transparent; cursor: pointer; font-size: 1rem;
    font-weight: 500; color: var(--color-secondary); display: flex;
    align-items: center; justify-content: center; gap: 0.5rem;
}
.profile-tab-link:hover { background-color: var(--color-surface); }
.profile-tab-link.active { color: var(--color-accent); border-bottom-color: var(--color-accent); }
.profile-tab-content { display: none; gap: 1.5rem; grid-column: 1 / -1; }
.profile-tab-content.active { display: grid; }

@media (min-width: 1024px) {
    .profile-tab-content.active {
        grid-template-columns: minmax(0, 2fr) minmax(0, 1fr); 
        align-items: start;
    }
}
@media (max-width: 1024px) {
    .profile-tabs {
        top: 0; /* En móvil no hay header de escritorio, se pega arriba del todo */
        overflow-x: auto;
        justify-content: flex-start;
    }
    body { padding-top: 0; }
}
@media (max-width: 480px) {
    .profile-tab-link span { display: none; } /* Oculta texto, solo muestra iconos */
    .profile-tab-link { flex: 1; }
}
/* --- FIN: NUEVOS ESTILOS PARA PESTAÑAS --- */

/* --- Estilos para la Vista de Perfil Público --- */

/* Cuando el body tiene la clase .public-view, ocultamos los formularios */
body.public-view form,
body.public-view #orcid-section .btn,
body.public-view #projects-section .btn-secondary { display: none; }
body.public-view .main-content { display: none; }
body.loading-profile .main-content { opacity: 0; visibility: hidden; }

/* Ocultamos también cualquier sección que solo sea para el dueño del perfil */
body.public-view #orcid-section .btn,
body.public-view #projects-section .btn-secondary {
    display: none;
}

/* --- AÑADE ESTA NUEVA REGLA --- */
/* Oculta toda la columna de contenido principal en la vista pública */
body.public-view .main-content {
    display: none;
}
/* Oculta el contenido principal mientras se determina el permiso */
body.loading-profile .main-content {
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.2s ease-in-out;
}
/* --- INICIO: Ajustes Finales de Perfil --- */

/* 1. Alinea correctamente el avatar en el menú superior */
.desktop-nav .user-actions .nav-icon {
    display: flex;
    align-items: center;
    justify-content: center;
}

/* 2. Añade espacio y organización a los botones de la tarjeta de perfil */
.profile-card-nav {
    display: flex;
    flex-direction: column;
    gap: 0.5rem; /* Esto añade el espacio que faltaba entre los botones */
    margin: 1.5rem 0;
}

/* 3. Estilo para el nuevo botón "Próximamente" */
.profile-card-nav__link.is-coming-soon {
    color: var(--color-secondary);
    cursor: not-allowed;
    background-color: var(--color-background);
    opacity: 0.6;
}

.profile-card-nav__link.is-coming-soon:hover {
    color: var(--color-secondary); /* Evita que cambie de color al pasar el cursor */
}


/* --- FIN: Ajustes Finales de Perfil --- */

.nav-icon { 
    position: relative;
    display: flex; 
    align-items: center; 
    justify-content: center; 
    width: 44px; 
    height: 44px; 
    border-radius: 8px; 
    transition: background-color 0.2s ease, color 0.2s ease; 
    color: var(--color-secondary); 
    font-size: 1.1rem;
    line-height: 1; /* <-- AÑADE ESTA LÍNEA */
}
/* --- Estilos para el Modal de Conexión --- */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.6);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 2000;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
}
.modal-overlay.is-visible {
    opacity: 1;
    visibility: visible;
}
.modal-content {
    position: relative;
    background: var(--color-surface);
    padding: 2rem;
    border-radius: var(--border-radius);
    width: 90%;
    max-width: 500px;
    transform: scale(0.95);
    transition: transform 0.3s ease;
}
.modal-overlay.is-visible .modal-content {
    transform: scale(1);
}
.modal-close-btn {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: none;
    border: none;
    font-size: 1.5rem;
    color: var(--color-secondary);
    cursor: pointer;
}

/* --- Estilos para el Feed de la Comunidad --- */
#community-feed-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.feed-post {
    background-color: var(--color-background);
    padding: 1.5rem;
    border-radius: var(--border-radius);
    border: 1px solid var(--color-border);
}

.post-header {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 1rem;
}

.post-avatar {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    object-fit: cover;
}

.post-author {
    display: flex;
    flex-direction: column;
}

.post-author strong {
    font-size: 1.1rem;
    color: var(--color-primary);
}

.post-handle {
    font-size: 0.9rem;
    color: var(--color-secondary);
}

.post-body p {
    margin: 0;
    line-height: 1.6;
    word-wrap: break-word;
}

.post-embed-image {
    margin-top: 1rem;
}

.post-embed-image img {
    max-width: 100%;
    border-radius: var(--border-radius);
    border: 1px solid var(--color-border);
}

.post-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 1.5rem;
    padding-top: 1rem;
    border-top: 1px solid var(--color-border);
    font-size: 0.9rem;
    color: var(--color-secondary);
}

.post-stats {
    display: flex;
    gap: 1.5rem;
}

.post-stats span {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}
/* --- Estilos para el Panel de Estado de Comunidad --- */
.community-status-box {
    text-align: center; /* Centra el contenido */
}
.community-status-box h3 {
    text-align: left; /* Mantiene el título alineado a la izquierda */
}

/* --- Estilos para el Botón de Like --- */
.like-btn {
    background: none;
    border: none;
    color: var(--color-secondary);
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.25rem 0.5rem;
    border-radius: 6px;
    transition: color 0.2s ease, background-color 0.2s ease;
}
.like-btn:hover:not(:disabled) {
    background-color: var(--color-background);
    color: #e0245e; /* Color rosa/rojo para hover */
}
.like-btn.is-liked {
    color: #e0245e; /* Color cuando ya tiene like */
    font-weight: bold;
}
.like-btn:disabled {
    cursor: not-allowed;
    opacity: 0.6;
}
.troubleshooting-note {
    margin-top: 1.5rem;
    padding: 1rem;
    background-color: var(--color-background);
    border-radius: 8px;
    border: 1px solid var(--color-border);
    font-size: 0.85rem;
}
.troubleshooting-note p {
    margin: 0;
    color: var(--color-secondary);
}
/* --- Estilos para el Botón de Comentar --- */
.comment-btn {
    background: none;
    border: none;
    color: var(--color-secondary);
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.25rem 0.5rem;
    border-radius: 6px;
    transition: color 0.2s ease, background-color 0.2s ease;
}

.comment-btn:hover:not(:disabled) {
    background-color: var(--color-background);
    color: var(--color-accent);
}

.comment-btn:disabled {
    cursor: not-allowed;
    opacity: 0.6;
}
/* AJUSTE PARA ESTABILIZACIÓN DEL FEED */
/* Estilo para el contador de comentarios (que ya no es un botón) */
.comment-stat {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    cursor: help; /* Cambia el cursor para indicar que hay un tooltip informativo */
    opacity: 0.7; /* Lo hace ligeramente menos prominente que los botones reales */
}
/* AÑADE ESTO AL FINAL DE profile.css */

.profile-view-group {
    margin-bottom: 1.5rem;
}

.profile-view-group label {
    display: block;
    font-weight: 500;
    font-size: 0.9rem;
    color: var(--color-secondary);
    margin-bottom: 0.25rem;
}

.profile-view-group p {
    margin: 0;
    font-size: 1rem;
    color: var(--color-primary);
    line-height: 1.6;
}
/* AÑADE ESTO AL FINAL DE profile.css */

.platforms-view-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.platform-link {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    text-decoration: none;
    color: var(--color-secondary);
    font-size: 0.9rem;
    padding: 0.5rem;
    border-radius: 6px;
    transition: background-color 0.2s;
}

.platform-link:hover {
    background-color: var(--color-background);
    color: var(--color-primary);
}

.platform-link i {
    font-size: 1.5rem;
    width: 24px;
    text-align: center;
}
/* ===================================================
   ESTILOS MEJORADOS PARA BOTONES DE NAVEGACIÓN DEL PERFIL
   =================================================== */

/* 1. Ajustamos el contenedor para dar más espacio */
.profile-card-nav {
    display: flex;
    flex-direction: column;
    gap: 0.75rem; /* Aumentamos el espacio entre botones (puedes ajustarlo a 1rem si quieres más) */
    margin-top: 1.5rem;
}

/* 2. Damos estilo de botón a cada enlace */
.profile-card-nav__link {
    display: flex; /* Para alinear icono y texto */
    align-items: center;
    gap: 0.75rem; /* Espacio entre icono y texto */
    
    padding: 12px 16px;
    background-color: var(--color-background); /* Fondo sutil para diferenciarlo de la tarjeta */
    border: 1px solid var(--color-border);
    border-radius: 8px; /* Esquinas redondeadas */
    
    text-decoration: none;
    text-align: left;
    font-weight: 500;
    color: var(--color-primary);
    
    transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease;
}

/* 3. Añadimos un efecto visual al pasar el cursor */
.profile-card-nav__link:hover {
    background-color: var(--color-surface);
    border-color: var(--color-accent);
    color: var(--color-accent);
}

/* 4. Estilo para el icono dentro del botón */
.profile-card-nav__link i {
    width: 20px; /* Ancho fijo para alineación */
    text-align: center;
    color: var(--color-secondary);
    transition: color 0.2s ease;
}

/* 5. También cambiamos el color del icono al pasar el cursor */
.profile-card-nav__link:hover i {
    color: var(--color-accent);
}
/* ===================================================
   ESTILO PARA EL BOTÓN DE APOYO
   =================================================== */

.profile-card-nav__link.support-btn {
    /* Mantenemos los estilos base del botón, pero cambiamos el color de acento */
    border-color: var(--color-accent);
    color: var(--color-accent);
}

.profile-card-nav__link.support-btn i {
    color: var(--color-accent);
}

/* Al pasar el cursor, lo hacemos más llamativo */
.profile-card-nav__link.support-btn:hover {
    background-color: var(--color-accent);
    color: white; /* El color del texto cambia a blanco */
}

.profile-card-nav__link.support-btn:hover i {
    color: white; /* El color del icono también cambia a blanco */
}