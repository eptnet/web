<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Perfil - Epistecnología</title>
    <link rel="icon" type="image/png" href="https://i.ibb.co/hFRyKrxY/logo-epist-v3-1x1-c.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    <link rel="stylesheet" href="/inv/css/profile.css">
</head>
<body>
    <header class="top-bar">
        <div class="top-bar__left">
            <a href="/" class="top-bar__logo"><img src="https://i.ibb.co/hFRyKrxY/logo-epist-v3-1x1-c.png" alt="Logo Epistecnología"></a>
        </div>
        <div class="top-bar__right">
            <button class="top-bar-btn" id="theme-switcher" title="Cambiar tema"><i class="fa-solid fa-moon"></i></button>
            <button class="top-bar-btn" id="logout-btn-header" title="Cerrar Sesión"><i class="fa-solid fa-right-from-bracket"></i></button>
            <a href="/inv/dashboard.html" id="user-avatar-header" title="Ir al Dashboard"></a>
        </div>
    </header>

    <div class="page-container">
        <div class="profile-layout">
            <aside class="profile-sidebar">
                <div class="bento-box profile-card">
                    <img id="profile-card-avatar" class="profile-card__avatar" alt="Avatar de usuario">
                    <h2 id="profile-card-name">Cargando...</h2>
                    <p id="profile-card-orcid" class="profile-card__orcid"></p>
                    <p id="profile-card-bio"></p>
                    <div id="profile-card-socials" class="profile-card__socials"></div>
                    <hr>
                    <a href="/inv/dashboard.html" id="dashboard-link-btn" class="btn btn-primary"><i class="fa-solid fa-arrow-right"></i> Ir al Dashboard</a>
                </div>
            </aside>

            <main class="main-content">
                <div class="bento-box">
                    <h3><i class="fa-brands fa-orcid"></i> Identidad Académica</h3>
                    <div id="orcid-section">
                        <p>Valida tu perfil conectando tu cuenta de ORCID.</p>
                        <button id="connect-orcid-btn" class="btn btn-orcid"><i class="fa-brands fa-orcid"></i> Conectar con ORCID</button>
                    </div>
                </div>

                <div class="bento-box">
                    <h3><i class="fa-solid fa-user-pen"></i> Perfil Público</h3>
                    <form id="profile-form">
                        <div class="form-group"><label for="display-name">Nombre a Mostrar</label><input type="text" id="display-name" required></div>
                        <div class="form-group"><label for="bio">Biografía Corta (250 caracteres)</label><textarea id="bio" rows="3" maxlength="250"></textarea></div>
                        <button type="submit" class="btn btn-primary"><i class="fa-solid fa-floppy-disk"></i> Guardar Perfil</button>
                        <p id="form-message" class="form-message"></p>
                    </form>
                </div>

                <div class="bento-box">
                    <h3><i class="fa-solid fa-share-nodes"></i> Plataformas y Redes</h3>
                    <form id="platforms-form">
                        <h4>Plataformas Principales</h4>
                        <div class="form-group">
                            <label for="youtube-url">Canal de YouTube</label>
                            <input type="url" id="youtube-url" placeholder="https://youtube.com/c/...">
                        </div>
                        <div class="form-group">
                            <label for="substack-url">Perfil de Substack</label>
                            <input type="url" id="substack-url" placeholder="https://tupublicacion.substack.com">
                        </div>
                        <hr>
                        <h4>Otras Redes Sociales</h4>
                        <div class="form-group">
                            <label for="website-url">Sitio Web / Blog</label>
                            <input type="url" id="website-url" placeholder="https://...">
                        </div>
                        <div class="form-group">
                            <label for="x-url">Perfil de X (Twitter)</label>
                            <input type="url" id="x-url" placeholder="https://x.com/usuario">
                        </div>
                        <div class="form-group">
                            <label for="linkedin-url">Perfil de LinkedIn</label>
                            <input type="url" id="linkedin-url" placeholder="https://linkedin.com/in/usuario">
                        </div>
                        <div class="form-group">
                            <label for="instagram-url">Perfil de Instagram</label>
                            <input type="url" id="instagram-url" placeholder="https://instagram.com/usuario">
                        </div>
                        <div class="form-group">
                            <label for="facebook-url">Perfil de Facebook</label>
                            <input type="url" id="facebook-url" placeholder="https://facebook.com/usuario">
                        </div>
                        <div class="form-group">
                            <label for="tiktok-url">Perfil de TikTok</label>
                            <input type="url" id="tiktok-url" placeholder="https://tiktok.com/@usuario">
                        </div>
                        <button type="submit" class="btn btn-primary"><i class="fa-solid fa-floppy-disk"></i> Guardar Plataformas</button>
                    </form>
                </div>

                <div class="bento-box">
                    <h3><i class="fa-solid fa-book-bookmark"></i> Proyectos (DOI)</h3>
                    <div id="projects-section">
                        <p class="form-hint">Una vez conectado a ORCID, podrás sincronizar tus trabajos.</p>
                        <button id="sync-orcid-works-btn" class="btn btn-secondary" disabled><i class="fa-solid fa-sync"></i> Sincronizar desde ORCID</button>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script type="module" src="/inv/js/profile.js"></script>
</body>
</html>