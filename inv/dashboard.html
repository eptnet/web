<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Epistecnología</title>
    <link rel="icon" type="image/png" href="https://i.ibb.co/hFRyKrxY/logo-epist-v3-1x1-c.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    <link rel="stylesheet" href="/inv/css/dashboard.css">
</head>
<body>
    <div class="dashboard-container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <a href="/" class="logo-link"><img src="https://i.ibb.co/hFRyKrxY/logo-epist-v3-1x1-c.png" alt="Logo" class="logo"></a>
                <h2 class="link-text">Dashboard</h2>
            </div>
            <nav class="sidebar-nav">
                <a href="#" class="nav-link active" data-section="home-section" title="Inicio"><i class="fa-solid fa-house"></i><span class="link-text">Inicio</span></a>
                <a href="#" class="nav-link" data-section="studio-section" title="Estudio de Grabación"><i class="fa-solid fa-podcast"></i><span class="link-text">Estudio</span></a>
                <a href="/inv/profile.html" class="nav-link" title="Mi Perfil"><i class="fa-solid fa-user-edit"></i><span class="link-text">Mi Perfil</span></a>
                
            </nav>
            <div class="sidebar-footer">
                <button id="logout-btn" class="nav-link" title="Cerrar Sesión"><i class="fa-solid fa-right-from-bracket"></i><span class="link-text">Cerrar Sesión</span></button>
            </div>
        </aside>

        <main class="main-content">
            <header class="main-header">
                <h1 id="user-name-header">Cargando...</h1>
            </header>
            
            <section id="home-section" class="content-section"></section>
            <section id="studio-section" class="content-section"></section>

            <div id="mixer-embed-container" style="display: none;">
                <header class="mixer-embed__header">
                    <img src="https://i.ibb.co/hFRyKrxY/logo-epist-v3-1x1-c.png" alt="Logo" class="mixer-embed__logo">
                    <div id="mixer-room-actions" class="mixer-embed__room-actions"></div>
                    <div class="mixer-embed__actions">
                        <button id="mixer-popout-btn" class="btn-secondary" title="Abrir en nueva pestaña"><i class="fa-solid fa-arrow-up-right-from-square"></i></button>
                        <button id="mixer-close-btn" class="btn-secondary" title="Volver al Dashboard">&times;</button>
                    </div>
                </header>
                <div class="mixer-embed__content">
                    <iframe id="mixer-iframe" allow="autoplay; camera; microphone; fullscreen; picture-in-picture; display-capture"></iframe>
                </div>
            </div>
        </main>
    </div>

    <div id="modal-overlay-container"></div>

    <template id="template-home-section">
        <div class="workflow-step">
            <h2><span class="step-number">1</span> Selecciona tu Proyecto</h2>
            <p>Elige un proyecto para asociarlo a tu próxima creación.</p>
            <div id="projects-list-container">Cargando proyectos...</div>
        </div>
        <div class="workflow-step">
            <h2><span class="step-number">2</span> ¿Cómo quieres divulgar hoy?</h2>
            <p>Elige una herramienta para empezar a crear tu contenido.</p>
            <div class="creation-grid">
                <div class="creation-card" data-studio-action="podcast"><i class="fa-solid fa-microphone-lines icon"></i><h3>Grabar Podcast</h3><p>Crea una sala de solo audio de alta calidad.</p></div>
                <div class="creation-card" data-studio-action="presentation"><i class="fa-solid fa-desktop icon"></i><h3>Grabar Presentación</h3><p>Grábate a ti mismo junto a tu pantalla o diapositivas.</p></div>
                <div class="creation-card" data-studio-action="interview"><i class="fa-solid fa-users icon"></i><h3>Grabar Entrevista</h3><p>Una sala de video para conversar con invitados.</p></div>
                <div class="creation-card" data-studio-action="live"><i class="fa-solid fa-tower-broadcast icon"></i><h3>Transmitir en Vivo</h3><p>Genera una sala y un enlace público para tu audiencia.</p></div>

                <div class="creation-card" data-studio-action="ai-social"><i class="fa-solid fa-hashtag icon"></i><h3>Post para Redes</h3><p>Genera un texto breve y atractivo para redes sociales.</p></div>
                <div class="creation-card" data-studio-action="ai-article"><i class="fa-solid fa-pen-nib icon"></i><h3>Artículo de Opinión</h3><p>Desarrolla un borrador de artículo para tu blog o prensa.</p></div>
                <div class="creation-card" data-studio-action="ai-script"><i class="fa-solid fa-file-powerpoint icon"></i><h3>Guion de Presentación</h3><p>Estructura los puntos clave para tu próxima exposición.</p></div>
                <div class="creation-card" data-studio-action="ai-summary"><i class="fa-solid fa-file-lines icon"></i><h3>Resumen de Artículo</h3><p>Crea un abstract conciso a partir de un texto extenso.</p></div>
            </div>
        </div>
    </template>
    
    <template id="template-studio-section">
        <h2><i class="fa-solid fa-podcast"></i> Estudio de Grabación y Transmisión</h2>
        <p>Aquí encontrarás las salas que has configurado. Desde aquí puedes iniciarlas y gestionar los enlaces.</p>
        <div id="sessions-container" class="sessions-grid">
            <div class="studio-launcher">
                <h3>Aún no has configurado ninguna sala</h3>
                <p>Ve a la sección "Inicio" para crear tu primera sesión de grabación o transmisión.</p>
            </div>
        </div>
    </template>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="/inv/js/dashboard.js"></script>
</body>
</html>