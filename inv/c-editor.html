<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estudio Omnicanal - Epistecnología</title>
    <link rel="icon" type="image/png" href="https://i.ibb.co/hFRyKrxY/logo-epist-v3-1x1-c.png">
    
    <link rel="stylesheet" href="/inv/css/dashboard.css">
    <link rel="stylesheet" href="/inv/css/editor-studio.css"> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    
    <script src="https://cdn.tiny.cloud/1/wac03ii8izevsozn0if0ssfme0syw62i0zw7szp05f8trx3o/tinymce/7/tinymce.min.js" referrerpolicy="origin"></script>
</head>
<body class="studio-body">
    <header class="studio-topbar">
        <div class="topbar-left">
            <a href="/inv/dashboard.html" class="back-btn" title="Volver al Dashboard"><i class="fa-solid fa-arrow-left"></i></a>
            <img src="https://i.ibb.co/hFRyKrxY/logo-epist-v3-1x1-c.png" alt="Logo" class="studio-logo">
            
            <div class="project-focus-selector">
                <label for="active-project-select"><i class="fa-solid fa-microscope"></i> Proyecto Activo:</label>
                <select id="active-project-select" class="form-control">
                    <option value="">Cargando proyectos...</option>
                </select>
                <span id="doi-badge" class="badge-hidden" title="Proyecto verificado con DOI"><i class="fa-solid fa-certificate"></i> DOI Verificado</span>
            </div>
        </div>

        <div class="topbar-right">
            <span id="save-status" class="save-status"><i class="fa-solid fa-cloud"></i> Guardado automático</span>
            <button class="icon-btn" id="theme-switcher-studio" title="Cambiar tema"><i class="fa-solid fa-moon"></i></button>
            <button class="icon-btn logout-btn" id="logout-btn" title="Cerrar Sesión"><i class="fa-solid fa-right-from-bracket"></i></button>
        </div>
    </header>

    <main class="studio-workspace">
        
        <aside class="col-ai-engine pane">
            <div class="pane-header">
                <h2><i class="fa-solid fa-brain"></i> Asistente de Creación</h2>
            </div>
            
            <div class="ai-tabs">
                <button class="ai-tab-btn active" data-target="tab-text"><i class="fa-solid fa-pen-nib"></i> Texto</button>
                <button class="ai-tab-btn" data-target="tab-image"><i class="fa-solid fa-image"></i> Imagen</button>
                <button class="ai-tab-btn disabled" data-target="tab-video" title="Próximamente"><i class="fa-solid fa-film"></i> Video</button>
            </div>

            <div class="ai-tab-content active" id="tab-text">
                <div class="form-group">
                    <label>¿Qué necesitas redactar?</label>
                    <select id="ai-task-dropdown" class="form-control">
                        <option value="social">Hilo para Redes Sociales</option>
                        <option value="summary">Resumen (Abstract)</option>
                        <option value="text">Artículo de Divulgación</option>
                        <option value="script">Guion para Video Corto</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Instrucciones adicionales (Opcional):</label>
                    <textarea id="ai-custom-prompt" rows="4" placeholder="Ej: Usa un tono irónico, enfócate en los resultados del año 2023..."></textarea>
                </div>
                <button id="ai-generate-text-btn" class="btn-primary w-100"><i class="fa-solid fa-wand-magic-sparkles"></i> Generar Texto</button>
                <div id="ai-text-results" class="ai-results-container"></div>
            </div>

            <div class="ai-tab-content" id="tab-image">
                <div class="form-group">
                    <label>Describe la imagen que deseas:</label>
                    <textarea id="ai-image-prompt" rows="4" placeholder="Ej: Una célula humana en 3D con colores neón, estilo realista científico..."></textarea>
                </div>
                <div class="form-group">
                    <label>Estilo visual:</label>
                    <select id="ai-image-style" class="form-control">
                        <option value="realistic">Realista / Fotográfico</option>
                        <option value="infographic">Infografía Técnica</option>
                        <option value="minimalist">Minimalista Abstracto</option>
                    </select>
                </div>
                <button id="ai-generate-image-btn" class="btn-primary w-100"><i class="fa-solid fa-palette"></i> Generar Imagen</button>
                <div id="ai-image-results" class="ai-results-container"></div>
            </div>
        </aside>

        <section class="col-editor pane">
            <div class="pane-header">
                <input type="text" id="post-title" class="editor-title-input" placeholder="Escribe un título atractivo para tu artículo...">
            </div>
            
            <div class="editor-container">
                <textarea id="rich-text-editor"></textarea>
            </div>

            <div class="media-tray">
                <h4><i class="fa-solid fa-paperclip"></i> Archivos Adjuntos</h4>
                <div id="media-gallery" class="media-gallery">
                    <p class="empty-tray-text">Las imágenes generadas aparecerán aquí.</p>
                </div>
            </div>
        </section>

        <aside class="col-distribution pane">
            <div class="pane-header">
                <h2><i class="fa-solid fa-share-nodes"></i> Distribución</h2>
            </div>

            <div class="distribution-section">
                <h3>1. Selecciona los destinos</h3>
                <div class="network-toggles">
                    <label class="network-toggle">
                        <input type="checkbox" id="dest-epistecnologia" checked disabled> <span class="network-icon epist-bg"><i class="fa-solid fa-microscope"></i></span> Comunidad Epistecnología
                    </label>
                    <label class="network-toggle">
                        <input type="checkbox" id="dest-bsky">
                        <span class="network-icon bsky-bg"><i class="fa-brands fa-bluesky"></i></span> Bluesky
                    </label>
                    <label class="network-toggle" title="Próximamente">
                        <input type="checkbox" id="dest-linkedin" disabled>
                        <span class="network-icon linkedin-bg"><i class="fa-brands fa-linkedin-in"></i></span> LinkedIn
                    </label>
                </div>
            </div>

            <div class="distribution-section">
                <h3>2. Adapta tu mensaje (Redes Sociales)</h3>
                <p class="help-text">Este texto acompañará al enlace de tu artículo principal.</p>
                <textarea id="social-post-text" rows="5" placeholder="¡He publicado un nuevo avance sobre mi investigación! Lee los detalles aquí..."></textarea>
                <div class="char-counter">
                    <span id="social-char-count">0</span> / <span id="social-char-limit">300</span>
                </div>
            </div>

            <div class="distribution-actions">
                <button id="save-draft-btn" class="btn-secondary w-100 mb-2"><i class="fa-regular fa-floppy-disk"></i> Guardar Borrador</button>
                <button id="publish-btn" class="btn-publish w-100"><i class="fa-solid fa-paper-plane"></i> Publicar Ahora</button>
            </div>
        </aside>

    </main>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script type="module" src="/inv/js/editor-studio.js"></script>
</body>
</html>